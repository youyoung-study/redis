## Sorted set을 이용한 실시간 리더보드

- 경쟁자들의 순위와 현재 점수를 보여주는 순위표
- 주로 게임에서 스코어로 정렬돼 상위 경쟁자의 순위를 보여주는 용도로 쓰임
- 게임 이외 서비스에서도 여러 데이터들을 게임화해 리더보드로 나타내기도함

**sorted set을 이용한 최근 검색 기록**

- 유저별로 다른 키워드 노출
- 검색 내역은 중복 제거
- 가장 최근 검색한 5개의 키워드만 사용자에게 노출

**sorted set을 이용한 태그 기능**

- 게시글 기준으로 태그를 추가할 수 있다.
- 태그를 기준으로 게시글을 추가할 수 있다.

### **랜덤 데이터 추출**

- 레디스를 사용하면 O(1)의 시간 복잡도를 이용해 랜덤한 데이터를 추출할 수 있다. (RANDOMKEY 커맨드 활용)
    - **hash**: HRANDFIELD 커맨드 활용
    - **set**: SRANDMEMBER 커맨드 활용
    - **sorted set**: ZRANDMEMBER 커맨드 활용

### **레디스에서의 다양한 카운팅 방법**

좋아요 처리하기

- 댓글 id를 기준으로 set을 생성한 뒤, 좋아요를 누른 유저의 id를 set에 저장하면 중복 없이 데이터를 저장할 수 있다.
- 각 댓글별로 좋아요를 누른 수는 SCARD 커맨드로 확인할 수 있다.

읽지 않은 메시지 수 카운팅하기

- 채팅 메시지가 도착할 때마다 데이터를 인메모리 데이터베이스(레디스)에 일시적으로 저장한 뒤 필요한 시점에 한번에 DB를 업데이트 하는 방식을 사용하면 부하를 최소화할 수 있다.
- hash 구조를 활용하여 카운트를 효과적으로 관리할 수 있다.