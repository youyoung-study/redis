### 레디스에서 고가용성을 확보하기 위한 두 가지 기능

- **복제**: 마스터 노드의 데이터를 실시간으로 복제본 노드에 복사
- **자동 페일오버**: 마스터 노드 장애 시 자동으로 클라이언트 연결을 복제본으로 리디렉션

### 고가용성 시스템

- 가용성이 높은 시스템(가용성 : 일정 기간 동안 서비스를 정상적으로 사용할 수 있는 시간의 비율)

### 레디스에서의 복제 구조

- **복제본 노드 추가 이유**:
    - 하드웨어 고장을 대비하여 여분의 복제본이 필요.
    - 복제본에서 트래픽을 분산하여 부하를 줄임.
    - 마스터 노드에서 백업시 서비스 영향을 최소화.

### 멀티 마스터

- 레디스는 멀티 마스터를 지원 X
- 마스터 노드는 **복제불가**

### 복제 구조 구성하기

```java
REPLICAOF <master-ip> <master-port>
```

- 복제본이 될 노드 B에서 REPLICAOF 커맨드를 입력하여 마스터와 연결
- 데이터 입력은 마스터에만 가능**.** 복제본은 읽기 전용

### 복제 메커니즘

1. **디스크 사용 복제**:
    - 마스터에서 RDB 파일을 생성한 뒤 복제본으로 전
2. **디스크를 사용하지 않는 복제(diskless)**
    - 디스크의 I/O가 느리면 네트워크가 빠를 때 복제 속도가 더 빠르게 완료

### 비동기 방식으로 복제 동작

- 복제본에 데이터가 정확히 전달되었는지 확인하지 않아 짧은 지연시간과 높은 성능을 제공
- 데이터 유실가능성 존재

### 복제본 연결 및 상태 확인

- **INFO REPLICATION** 커맨드를 사용하여 마스터와 복제본의 연결 상태를 확인

### 읽기 전용 모드

- 복제본은 기본적으로 읽기 전용 모드로 동작(2.6버전이후)
    - 복제본 노드에 새로운 데이터 저장 불가
    - 복제본 노드에 연결시 읽기만 가능.
    - replica-read-only옵션을 이용해 제어가능.

### 백업을 사용하지 않을 경우 데이터 복제

- 레디스에서 복제 사용시
    - 마스터와 복제본에서 백업 기능 사용 권장
    - 백업 기능 미사용시
        - 레디스 자동 재시작 미사용 권장