# NoSQL 이란?

- No SQL 혹은 Not Only SQL을 의미한다.
    - SQL을 사용하지 않는 데이터 저장소임을 내포한다.
- 관계가 정의돼 있지 않은 데이터를 저장한다.
- 마이크로서비스의 저장소로 쓰일 수 있도록 여러 요구 사항을 만족시킨다.

---

## NoSQL 특징

### 실시간 응답

- 사람은 100ms가 넘어가면 지연이 있다고 인지한다.
- 데이터 저장소에서 데이터를 가져올 때 발생할 수 있는 지연은 0~1ms 이내.

### 확장성

- 예상치 못한 이벤트로 인한 트랜잭션의 증가에 유연하게 확장될 수 있다.

### 고가용성

- 장애 상황에서 신속하게 복구돼 항상 사용할 수 있는 상태를 유지.

### 클라우드 네이티브

- 클라우드 제공 업체에서 제공하는 DBaas 를 사용하면 직접 설치, 운영할 필요 없이, 설치된 상품을 바로 사용할 수 있게 된다.

### 단순성

- 마이크로서비스 아키텍처와 같이 서비스가 세분화될수록 관리 포인트는 늘어난다. 따라서 개발자와 운영자는 데이터 저장소를 간단하게 사용하고 싶어 한다.

### 유연성

- 관계형 데이터베이스보다 다양한 방식으로 비정형 데이터를 저장할 수 있는 방법을 제공한다.

### No SQL 데이터 저장소 유형

1. 그래프 유형
    - 관계를 저장하고 표현할때 유용하게 사용
    - 속성의 크기가 크거나 혹은 매우 많은 속성을 저장할 때에는 적합하지 않음
    - 추천 서비스 등에서 유용하게 사용
        - 친구의 친구 관계의 새로운 친구 추천
        - 구매 이력이 비슷한 유저 상품 추천 등
2. 칼럼 유형
    - 테이블을 행이 아닌 열을 기준으로 저장
    - 하나의 열에 중첩된 키-값 형ㄷ태로 저장될 수 있기 때문에 유연한 스키마를 저장할 수 있다.
    - 대량의 데이터에 대한 집계 쿼리를 다른 유형보다 훨씬 빠르게 처리할 수 있다.
        - 기업의 BI 분석 등 분석, 보고, 빅데이터 처리에 적합
3. 문서 유형
    - JSON 형태로 데이터가 저장돼, 개발자들이 편하게 사용할 수 있는 구조
    - 스키마가 따로 정해져 있지 않기 때문에 애플리케이션에 맞게 데이터를 그대로 저장할 수 있어 유연성이 크다는 장점이 존재한다.
    - 데이터를 저장하거나 검색하는데 효과적임
        - MongoDB, CouchDB, AWS의 DocumentDB 등
4. 키-값 유형
    - 가장 단순하고 빠름
    - 다른 유형보다 수평적 확장이 쉬움
    - 게임이나 IoT와 같은 실시간 서비스에서 활용됨
    - 대표적인 키-값 유형의 데이터베이스
        - 레디스
        - AWS ElasticCache
        - AWS DynamoDB
        - Oracle NoSQL Database
        - Memcached

---

# 레디스란?

Remote dictionary server의 약자인 레디스는 고성능 키-값 유형의 인메모리 NoSQL 데이터베이스로, 오픈 소스 기반의 데이터 저장소다.

### 레디스 대표적인 특징

- 실시간 응답(빠른 성능)
    - 인메모리 형태의 데이터베이스라 모든 데이터가 컴퓨터의 메모리에서 관리된다.
    - 디스크에 접근하는 과정x → 데이터의 처리 성능이 굉장히 빠름
    - 키-값 형태로 데이터를 관리하는데, 키에 매핑되는 값에 문자열 뿐만 아니라 hash, set 등 다양한 데이터 구조를 저장할 수 있도록 지원한다.(임피던스 불일치 해소)
        - 임피던스 불일치란?
            - 관계형 데이터베이스의 테이블과 프로그래밍 언어 간 데이터 구조, 기능의 차이로 인해 발생하는 충돌을 의미
- 고가용성
    - 복제를 통해 데이터를 여러 서버에 분산 가능
    - 센티널은 장애 상황을 탐지해 자동으로 페일오버를 시켜준다.
    - 페일오버(Failover)는 시스템 장애 발생 시 백업 시스템으로 자동 전환하는 기능
- 확장성
    - 클러스터 모드를 사용한다면 손쉬운 수평적 확장 가능
- 클라우드 네이티브 - 멀티 클라우드
    - 여러 클라우드 제공업체의 서비스를 동시에 혹은 혼합해 활용하는 전략을 의미

### 주의

- 레디스는 싱글 스레드로 동작함 즉 한 사용자가 오래 걸리는 커맨드를 수행한다면, 다른 사용자는 그 쿼리가 완료될 때까지 대기할 수밖에 없다는 것, 반환이 느린 특정한 커맨드가 존재하기 때문에 그러한 커맨드를 주의해서 사용해야함

### 데이터 저장소로서의 레디스

- AOF(Append Only File) RDB(Redis DataBase) 형식으로 디스크에 주기적으로 저장 가능
    - 장애가 발생해 데이터가 유실되더라도 복구 가능

### 메시지 브로커로서의 레디스

- 레디스의 pub/sub 기능으로 fire-and-forget 패턴이 필요한 간단한 알림 서비스 제공 가능
- stream 자료 구조를 이용하면 레디스를 스트림 플랫폼으로 사용 가능
    - 아파치 카프카 시스템에서 영감을 받아 만든 자료구조, 데이터는 계속해서 추가되는 방식으로 저장됨
